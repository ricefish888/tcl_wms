$现在=现在()
编码= ""
如果(单据编码 =='WAVE_PICKING'){
       单据编码='WAVEPICKING'
}
//入库
如果(单据编码 =='ZCCKD' 或 
    单据编码 =='BHRKD' 或 
    单据编码 =='THRKD' 或 
    单据编码 =='SCTLD' 或 
    单据编码 =='DBRKD' 或 
    单据编码 =='PYRKD' 或 
    单据编码 =='BFRKD' ){
    单据编码='IN'
}
如果(单据编码 =='YLRKD' 或 
    单据编码 =='QTRKD' 或 
    单据编码 =='JITRKD'){
    单据编码='IN'
}


//拣货单
如果(单据编码 =='XSJHD' 或 
    单据编码 =='SCLLD' 或 
    单据编码 =='SLSGD' 或 
    单据编码 =='SHBJCK' 或 
    单据编码 =='TGYSCK' 或 
    单据编码 =='BFCKD' 或 
    单据编码 =='DBCKD'){
    单据编码='PT'
}
如果(单据编码 =='PKCKD' 或 
    单据编码 =='YLCKD' 或 
    单据编码 =='QTCKD'){
    单据编码='PT'
}


如果(单据编码 =='PUTAWAY' 或 
    单据编码=='PICKING' ){
       单据编码='WD'
} 
如果(单据编码 =='QUICK_SHIPPING'){
       单据编码='CK'
}

$特殊逻辑='否'
//交货单
如果(单据编码 =='DL'){
    $特殊逻辑='是'
    编码 = 单据编码 + 格式化日期($现在,"yyMM")
	流水号 = 获取流水序列号(编码,6)
	流水号 = 替换字符串(流水号,单据编码,"")
}
如果($特殊逻辑=='否') {
	
	编码 = 单据编码 + 格式化日期($现在,"yyMMdd")
	流水号=获取流水序列号(编码,6)
}